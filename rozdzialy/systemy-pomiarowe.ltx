\section{Rozproszone systemy pomiarowe}

\subsection{Wprowadzenie do~systemów pomiarowych}

%Poprawna praca systemu elektroenergetycznego uzależniona jest
%od~sprawnego sterowania poszczególnymi elementami składającymi~się
%na~ten system, począwszy od~źródeł energii, a~skończywszy na~odbiorach
%użytkowników końcowych. Przeważająca część związanych z~tym zadań
%powierzana jest elementom automatyki systemowej, umożliwiającym kontrolę
%i~utrzymanie systemu w~czasie rzeczywistym.
%
%Dane wejściowe dla~działań urządzeń automatyki, a~często również
%dla~decyzji obsługi urządzeń elektroenergetycznych, stanowią dane
%pomiarowe. Poprawność podejmowanych decyzji jest więc silnie uzależniona
%od~jakości wykonywanych pomiarów, a~co za~tym idzie niezawodność pracy
%układów pomiarowych jest warunkiem niezbędnym dla~poprawnej pracy
%systemu.

% http://www.eti.pg.gda.pl/katedry/kmoe/dydaktyka/Metrologia/
% skrypt, systemy pomiarowe

System pomiarowy zdefiniować można jako zbiór środków technicznych
i~organizacyjnych przeznaczonych do~realizacji określonego celu
metrologicznego. System pomiarowy stanowi nazwę nadrzędną w~stosunku
do~pojęcia układu pomiarowego. Przyjąć można, że~zasadniczą różnicę
pomiędzy tymi terminami stanowi występowanie w~systemie pomiarowym
nadrzędnej jednostki funkcjonalnej (kontrolera), realizującej zadanie
sterowania systemem.\cite{pgeti}

W~zależności od~przeznaczenia, wyróżnia~się trzy klasy systemów
pomiarowych:

\begin{itemize}
	\item systemy pomiarowe badawcze,
	\item systemy pomiarowo-kontrolne,
	\item systemy pomiarowo-diagnostyczne.
\end{itemize}

Systemy pomiarowe badawcze stosowane są w~badaniach naukowych
do~empirycznej weryfikacji hipotez naukowych. Systemy tego typu
znajdują~się poza obszarem zainteresowania pracy.

Systemy pomiarowo-kontrolne wykorzystywane są do~automatyzacji procesów
technologicznych. Sygnały z~systemów tego typu wykorzystywane są
do~sterowania pracą urządzeń.

Systemy pomiarowo-diagnostyczne służą do~wykrywania i~lokalizacji
uszkodzeń.

Innym kryterium podziału systemów pomiarowych jest postać użyteczna
sygnałów pomiarowych. Wyróżnić można systemy analogowe i~cyfrowe.
W~obrębie pracy rozpatrywane będą wyłącznie systemy cyfrowe.


\subsection{Rozproszone systemy pomiarowe}

Sterowanie procesami czy~badanie stanu systemów rozległych obszarowo
wymaga pozyskiwania danych pomiarowych z~wielu oddalonych od~siebie
punktów pomiarowych, często w~czasie rzeczywistym. W~takich przypadkach
wskazane lub~nawet konieczne jest zastosowanie rozproszonych systemów
pomiarowych.

Brak jest ścisłego kryterium, wyróżniającego systemy rozproszone spośród
ogółu systemów pomiarowych. Często za~kryterium podziału przyjmuje~się
odległość pomiędzy poszczególnymi urządzeniami w~systemie. Przykładowo,
prof.~Nawrocki umownie za~systemy rozproszone uważa ,,systemy, które
mają urządzenia rozmieszczone w~większej liczbie pomieszczeń niż jedno,
lub w~których odległość między przyrządami w~systemie jest większa
niż~długość kabla interfejsowego''\cite{nawrocki}. % cyt. Nawrocki

Warunki pracy systemów rozproszonych, a~w~szczególności rozległość
obszarowa instalacji, wymuszają szereg wymagań w~stosunku do~realizacji
tych systemów. Pożądane są między innymi następujące cechy:

\begin{itemize}
	\item otwartość,
	\item skalowalność,
%	\item współbieżność,
	\item tolerowanie awarii (niezawodność),
	\item przezroczystość.
\end{itemize}

Zagadnienie otwartości dotyczy możliwości zmiany struktury systemu,
zarówno pod~względem fizycznym, jak~i~programowym. System otwarty
umożliwia dołączanie kolejnych elementów bądź~zmianę istniejących
bez~konieczności wprowadzania znacznych zmian w~pozostałej części
systemu, w~skrajnym przypadku --- wymiany elementów systemu.

Otwartość najczęściej realizuje~się stosując otwartą topologię systemu,
jak również otwarte standardy komunikacji. Zastosowanie otwartej topologii
umożliwia dołączanie kolejnych urządzeń i~usuwanie istniejących
przy~minimalnej zmianie struktury pozostałej części systemu.
Zastosowanie otwartych standardów komunikacji umożliwia dołączanie
elementów z~innej rodziny produktów czy~nawet innego producenta.

Otwartość pożądana jest w~każdym systemie, jednak w~przypadku systemów
rozproszonych staje~się szczególnie istotna. Znaczna liczba elementów
systemu oraz~ich rozległość terytorialna sprawiałaby, że~niepotrzebne
wymiany elementów byłyby kosztowne, czasochłonne i~powodowały długie
okresy przerw w~pracy systemu.

Skalowalność traktować można jako rozszerzenie otwartości. Jest to cecha
pozwalająca na~zachowanie podobnej wydajności systemu przy~zwiększaniu
liczby jego elementów czy~realizowanych zadań. Rozszerzanie systemu
nie~powinno mieć znacznego wpływu na~pracę pozostałych jego elementów,
a~koszt ewentualnych zmian (jak poszerzanie magistral komunikacyjnych)
powinien być jak najmniejszy.

Zdolność tolerowania awarii jest bardzo istotna z~punktu widzenia
niezawodności pracy systemu. System rozproszony musi zachować zdolność
do~pracy, chociażby w~części powierzonych zadań, przy~uszkodzeniu
dowolnego jego fragmentu.

Do~poprawy niezawodności dążyć można na~wiele sposobów. Wyróżnić można
chociażby stosowanie elementów nadmiarowych (pracujących równolegle
z~podstawowymi, bądź~rezerwowych) czy~algorytmów dostosowanych do~pracy
z~ograniczoną ilością dostępnych danych.

Przez~przezroczystość rozumie~się zdolność systemu do~prezentowania
spójnej struktury logicznej niezależnie od~rzeczywistego sposobu
połączenia urządzeń pomiarowych. Z~punktu widzenia użytkownika,
w~dowolnym punkcie rozproszonego systemu pomiarowego winny być dostępne
dane pomiarowe z~dowolnego innego punktu systemu, opisane w~sposób
jednolity i~jednoznaczny.

Istotne jest, by~zmiana struktury fizycznej części systemu pomiarowego,
np.~wskutek rozbudowy systemu czy~awarii, nie~wymuszała modyfikacji
algorytmów pozostałych urządzeń w~systemie. Zastosowanie innego
urządzenia pomiarowego czy~zmiana kanału przesyłu danych nie~powinna
powodować zmiany sposobu udostępnienia pomiaru.

Z~punktu widzenia przezroczystości często konieczna jest również
synchronizacja pomiarów. Pożądane jest, by~możliwe było jednoznaczne
przypisanie danych pomiarów do~określonej chwili czasowej, niezależnie
od~punktu pobrania informacji oraz~drogi jej przesyłu.


\subsection{Topologia rozproszonych systemów pomiarowych}

\begin{figure}[ht]
	\centering

	\subfloat[topologia gwiazdy]{
		\begin{tikzpicture}[scale=0.75]
			\begin{scope}[every node/.style={draw, circle, minimum size=5mm}]
				\node[fill=gray] (a) at (0,0) {};
				\node (b) at (3,2) {};
				\node (c) at (-2,2.5) {};
				\node (d) at (-3,-2.5) {};
				\node (e) at (3,-1.5) {};
			\end{scope}

			\draw (a) -- (b);
			\draw (a) -- (c);
			\draw (a) -- (d);
			\draw (a) -- (e);
		\end{tikzpicture}

		\label{top-gwiazdy}
	} %
~~ %
	\subfloat[topologia drzewa]{
		\begin{tikzpicture}[scale=0.75]
			\begin{scope}[every node/.style={draw, circle, minimum size=5mm}]
				\node[fill=gray] (a) at (0,0) {};

				\node[fill=lightgray] (b) at (1,1.5) {};
				\node[fill=lightgray] (c) at (-1.5,2) {};
				\node[fill=lightgray] (d) at (-0.5,-1.5) {};
				\node[fill=lightgray] (e) at (2,-1.5) {};

				\node (b1) at (2.5,2) {};
				\node (b2) at (1,3) {};
				\node (b3) at (3,0.5) {};

				\node (c1) at (-3,3) {};
				\node (c2) at (-2.7,1.5) {};
				\node (c3) at (-2,.3) {};

				\node (d1) at (-1.5,-3) {};
				\node (d2) at (0.5,-3) {};
			\end{scope}

			\draw (a) -- (b);
			\draw (a) -- (c);
			\draw (a) -- (d);
			\draw (a) -- (e);

			\draw (b) -- (b1);
			\draw (b) -- (b2);
			\draw (b) -- (b3);

			\draw (c) -- (c1);
			\draw (c) -- (c2);
			\draw (c) -- (c3);

			\draw (d) -- (d1);
			\draw (d) -- (d2);
		\end{tikzpicture}
		\label{top-drzewa}
	}

	\subfloat[topologia kraty]{
		\begin{tikzpicture}[scale=-0.75]
			\begin{scope}[every node/.style={draw, circle, minimum size=5mm}]
				\node (a) at (0,0) {};
				\node (b) at (3,2) {};
				\node (c) at (-2,2.5) {};
				\node (d) at (-3,-2.5) {};
				\node (e) at (3,-1.5) {};
			\end{scope}

			\draw (a) -- (b);
			\draw (a) -- (c);
			\draw (a) -- (d);
			\draw (a) -- (e);
			\draw (b) -- (c);
			\draw (b) -- (e);
			\draw (c) -- (d);
			\draw (d) -- (e);
		\end{tikzpicture}
		\label{top-kraty}
	} %
~~ %
	\subfloat[topologia mieszana]{
		\begin{tikzpicture}[scale=0.75]
			\begin{scope}[every node/.style={draw, circle, minimum size=5mm}]
				\node[fill=gray] (b) at (1,1.5) {};
				\node[fill=gray] (c) at (-1.5,2) {};
				\node[fill=gray] (d) at (-0.5,-1.5) {};
				\node[fill=gray] (e) at (2,-1.5) {};

				\node (b1) at (2.5,2) {};
				\node (b2) at (1,3) {};
				\node (b3) at (3,0.5) {};

				\node (c1) at (-3,3) {};
				\node (c2) at (-2.7,1.5) {};
				\node (c3) at (-2,.3) {};

				\node (d1) at (-1.5,-3) {};
				\node (d2) at (0.5,-3) {};
			\end{scope}

			\draw (b) -- (c);
			\draw (d) -- (c);
			\draw (d) -- (e);
			\draw (b) -- (e);
			\draw (b) -- (d);

			\draw (b) -- (b1);
			\draw (b) -- (b2);
			\draw (b) -- (b3);

			\draw (c) -- (c1);
			\draw (c) -- (c2);
			\draw (c) -- (c3);

			\draw (d) -- (d1);
			\draw (d) -- (d2);
		\end{tikzpicture}
		\label{top-mieszana}
	} %
	\caption{Typowe topologie rozproszonych systemów pomiarowych}
\end{figure}

Wyróżnia~się trzy podstawowe topologie stosowane w~rozproszonych systemach
pomiarowych: topologię gwiazdy, topologię drzewa i~topologię kraty.
\cite{worek-krzak}

Topologia gwiazdy (rys.~\ref{top-gwiazdy}) stanowi podstawową topologię
hierarchiczną.  Wyróżnia~się wówczas jeden węzeł nadrzędny (centralny),
który komunikuje~się z~pozostałymi węzłami sieci. Topologia gwiazdy
charakteryzuje~się niskim kosztem i~prostą realizacją. Jej wadą jest
brak możliwości bezpośredniej komunikacji pomiędzy węzłami --- przesył
informacji pomiędzy dwoma węzłami zawsze odbywa~się za~pośrednictwem
węzła nadrzędnego. Ogranicza to przepustowość sieci i~czyni ją wrażliwą
na~awarię węzła centralnego.

Rozszerzeniem topologii gwiazdy jest topologia drzewa
(rys.~\ref{top-drzewa}), nazywana również topologią rozproszonej
gwiazdy. W~topologii tej wyróznia~się hierarchię wielowarstwową,
przy~czym bezpośrednia komunikacja odbywa~się wyłącznie pomiędzy węzłem
podrzędnym i~nadrzędnym. Topologia drzewa sprawdza~się w~przypadku sieci
bardziej rozległych, w~których komunikacja pomiędzy jednym węzłem
centralnym, a~wszystkimi pozostałymi węzłami sieci byłaby nieefektywna.

W~sieci o~topologii drzewa, komunikacja pomiędzy węzłami podrzędnymi
odbywa~się za~pośrednictwem ścieżki obejmującej odpowiednie węzły
nadrzędne. Co za~tym idzie, komunikacja pomiędzy węzłami lokalnymi może
odbywać~się za~pośrednictwem jednego węzła nadrzędnego, z~kolei pomiędzy
węzłami odległymi może odbywać~się za~pośrednictwem kilku węzłów
nadrzędnych, włączając w~to również węzeł centralny.

Pozwala to zredukować wpływ ograniczeń topologii gwiazdy przy~rozległych
sieciach, jednocześnie zachowując jej zalety. Topologia ta
sprawdza~się w~sieciach, gdzie najczęściej komunikacja odbywa~się
na~drodze pionowej (przesył informacji w~kierunku węzłów nadrzędnych)
oraz w~obrębie węzłów lokalnych. W~sieci tego typu przesył danych pomiędzy
dwoma odległymi węzłami podrzędnymi jest nieefektywny. Sieć jest
wrażliwa na~awarie węzłów nadrzędnych, które powodują wyłączenie całego
segmentu z~pracy systemu.

Alternatywą dla~przedstawionych topologii hierarchicznych jest topologia
kraty (rys.~\ref{top-kraty}). W~tej topologii nie~wyróżnia~się węzłów
nadrzędnych, a~poszczególne węzły sieci łączy~się bezpośrednio z~kilkoma
(przynajmniej dwoma) innymi. W~zależności od~układu połączeń, wymiana
informacji pomiędzy dwoma węzłami może odbywać~się bezpośrednio
lub~za~pośrednictwem innych węzłów, przy~czym w~każdym przypadku możliwe
jest zastosowanie więcej niż~jednej ścieżki.

Podstawową zaletą struktury kratowej jest duża elastyczność.
Zwielokrotnienie ścieżek komunikacji pozwala na~uzyskanie dużej
przepustowości oraz~niezawodności --- w~przypadku awarii dowolnego
węzła, w~sieci wyznaczona może zostać nowa ścieżka przesyłu informacji.
Wadą struktury kratowej jest złożoność mechanizmów kontroli ruchu.

Oprócz wymienionych topologii często stosuje~się również topologię
mieszaną, co~pozwala na~dostosowanie poszczególnych topologii do~potrzeb
danej sieci. Na~przykład, połączenie topologii kraty z~topologią drzewa
(rys.~\ref{top-mieszana}) pozwala na~skrócenie drogi komunikacji
pomiędzy odległymi węzłami oraz~zwiększenie niezawodności pracy systemu.
W~przypadku przedstawionym na~rysunku, uszkodzenie dowolnego z~węzłów
nadrzędnych nie~wpływa na~możliwość komunikacji pomiędzy pozostałymi
węzłami nadrzędnymi (jak w~topologii kraty), jednakże odcina łączność
z~węzłami podrzędnymi (jak w~topologii drzewa).

% Bezprzewodowe sieci kontrolno-pomiarowe
%w aplikacjach przemysłowych
%dr inż. Cezary Worek
%mgr inż. Łukasz Krzak
%Katedra Elektroniki, WEAIiE AGH


\subsection{Zastosowanie rozproszonych systemów pomiarowych}

\subsubsection{Rozległe systemy pomiarowe}

% PMU and Time synch

Koncepcja WAMS (\eng{Wide Area Measurement System}) opiera~się
na~synchronicznych pomiarach parametrów elementów rozległych sieci
przesyłowych. Rozległość sieci, a~co za~tym idzie znaczna liczba
odległych od~siebie punktów pomiarowych, czyni system WAMS rozproszonym
systemem pomiarowym.

Najważniejszym rodzajem pomiarów w~systemach WAMS są pomiary
synchrofazorów. Definicja, sposób pomiaru i~przesyłu pomiarów
synchrofazorów zdefiniowane zostały w~normie IEEE C37.118. Pomiaru
dokonuje~się przy~wykorzystaniu urządzeń PMU (\eng{Phasor Measurement
Unit}).

W~celu dokonania pomiaru synchrofazora mierzy~się trójfazowe przebiegi
napięcia i~prądu, a~otrzymane pomiary synchronizuje~się
przy~wykorzystaniu czasu otrzymywanego z~sieci GPS. Na~podstawie
wykonanych pomiarów określa~się:

\begin{itemize}
	\item wartość skuteczną i~kąt fazowy (fazor) napięcia,

	\item wartość skuteczną i~kąt fazowy (fazor) prądu,

	\item częstotliwość oraz~jej pochodną.
\end{itemize}

Oprócz tego, PMU mogą przesyłać dodatkowe sygnały analogowe i~cyfrowe,
np.~sygnały sterowania.

Wyróżnia~się dwie klasy urządzeń PMU:

\begin{enumerate}
	\item klasę P (\eng{Protection} --- zabezpieczeniowa), o~szybkim
	czasie reakcji,

	\item klasę M (\eng{Measurement} --- pomiarowa), o~większej
	dokładności i~z~zastosowaniem filtrowania, lecz o~wolniejszym czasie
	reakcji.
\end{enumerate}

Do~zastosowań systemów WAMS należą:

\begin{itemize}
	\item analiza danych w~czasie rzeczywistym:

	\begin{itemize}
		\item wykrywania oscylacji małej częstotliwości,

		\item wykrywanie zmian kąta fazowego,

		\item wykrywanie niestabilności napięciowej,

		\item wykrywanie pracy wyspowej,

		\item poszukiwanie źródła oscylacji;
	\end{itemize}

	\item analizy po~wystąpieniu awarii,

	\item wyprowadzanie systemu z~pracy wyspowej,

	\item dynamiczna aktualizacja estymatorów stanu,

	\item monitorowanie obciążenia linii,

	\item automatyczny rozdział obciążenia,

	\item dostarczanie użytecznych informacji dla~dynamicznych modeli
	systemu.
\end{itemize}


\subsubsection{Pomiary inteligentne}

Jednym z~podstawowych elementów sieci inteligentnych ,,\textit{smart
grid}'' są inteligentne mierniki. Mierniki inteligentne umożliwiają
dwukierunkową komunikację w~czasie rzeczywistym, zapewniając bardziej
precyzyjne informacje o~obciążeniu sieci oraz~narzędzia jego kontroli.

System mierników inteligentnych stanowi szczególny przypadek
rozproszonego systemu pomiarowego. Obok typowych problemów związanych
z~przesyłem danych pomiarowych na~odległość, bardzo istotnym zagadnieniem
jest prywatność użytkowników. Szczególne zagrożenie dla~niej stanowić
może prowadzanie usług realizowanych przez~zewnętrzne podmioty ---
sprzedawców energii, spółki obrotu, przedsiębiorstwa oferujące usługi
doradcze.\cite{privacy-by-design}

W~celu zapewnienia właściwego poziomu bezpieczeństwa i~prywatności,
stosuje~się następujące reguły:

\begin{itemize}
	\item wszystkie przesyłane informacje są szyfrowane. Szyfrowanie
		odbywa~się przy~wykorzystaniu kryptografii asymetrycznej, bądź
		unikalnego klucza przypisanego do~użytkownika --- inni
		użytkownicy sieci nie~posiadają klucza niezbędnego
		do~odszyfrowania przesyłanych danych.

	\item Poprzez sieć nie~przesyła~się wrażliwych informacji
		o~kliencie. Dla~przykładu, do~identyfikacji licznika
		wykorzystuje~się unikalny identyfikator, który nie~zawiera
		zakodowanych danych adresowych użytkownika.

	\item Poprzez sieć przesyła~się minimalną liczbę informacji
		niezbędnych do~realizacji zadań. W~najczęstszym przypadku
		licznik inteligentny wysyłał więc będzie informację zawierającą
		jedynie identyfikator urządzenia oraz~wielkość zmierzonej
		energii.

	\item Uruchomienie każdej dodatkowej usługi wymaga od~użytkownika
		jawnego wyrażenia zgody na~przesył niezbędnych danych.
\end{itemize}
